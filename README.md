# EktaSahyog (Unity & Collaboration) üáÆüá≥

> **Bridging India's Cultural Divide through Technology**

![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)
![Status](https://img.shields.io/badge/Status-Active_Development-brightgreen)
![Stack](https://img.shields.io/badge/Stack-MERN-blue)
![AI](https://img.shields.io/badge/AI-Groq-orange)

---

## üìñ Introduction
**EktaSahyog** is a next-generation Unity & Collaboration platform engineered at the intersection of the **MERN stack**, **WebGL-powered browser-native Web3D**, **AI-driven systems**, **OCR**, and **real-time infrastructure**.

We moved far beyond static MERN applications to architect a cultural-scale digital ecosystem ‚Äî fusing multilingual AI communication, low-latency real-time collaboration, interactive cultural experiences, and WebGL-powered 3D environments to digitally represent India‚Äôs unity in motion.

In a nation of 28 states, 8 union territories, and 121 languages, EktaSahyog serves one singular purpose: **To Unite India.** It is not just a marketplace or a learning hub; it is a **National Integration Platform** that uses this advanced technology to dissolve the invisible borders that divide us.
<img width="1890" height="897" alt="image" src="https://github.com/user-attachments/assets/9c1c708c-3cb0-4f34-bd99-556575269055" />
<img width="1611" height="763" alt="image" src="https://github.com/user-attachments/assets/17ce04ac-e34b-49ff-b337-d34722fd97a0" />
<img width="1919" height="902" alt="Screenshot 2025-12-20 155125" src="https://github.com/user-attachments/assets/1116c434-476a-42d2-be1c-d08674e976df" />
<img width="1919" height="913" alt="Screenshot 2025-12-20 154913" src="https://github.com/user-attachments/assets/f4eeb763-04a3-493e-bfa0-c6c927149723" />
<img width="1919" height="910" alt="Screenshot 2025-12-20 155143 - Copy" src="https://github.com/user-attachments/assets/1596a3ce-df8b-48e8-987f-64c63475c804" />
<img width="1919" height="913" alt="Screenshot 2025-12-20 154745" src="https://github.com/user-attachments/assets/e26a0bce-1839-41b4-b732-4b57e23f07da" />
<img width="1919" height="906" alt="Screenshot 2025-12-20 154828" src="https://github.com/user-attachments/assets/af1a947e-5fe6-4116-a006-a82c5489ccd6" />
<img width="1919" height="912" alt="Screenshot 2025-12-20 154856" src="https://github.com/user-attachments/assets/d11d7733-1d2b-434d-b552-4a5e57bf397b" />
<img width="1919" height="912" alt="Screenshot 2025-12-20 154938" src="https://github.com/user-attachments/assets/51039257-6083-48bf-929c-47d42bbe82a5" />
<img width="1919" height="910" alt="Screenshot 2025-12-20 154951" src="https://github.com/user-attachments/assets/2f534f25-8f60-4b9c-b679-3c8b4b0ee299" />
<img width="1919" height="916" alt="Screenshot 2025-12-20 155027 - Copy" src="https://github.com/user-attachments/assets/ce1f421f-d527-46b9-9851-6bda1ca6f326" />
<img width="1919" height="913" alt="Screenshot 2025-12-20 155004" src="https://github.com/user-attachments/assets/bd377a18-bb50-4c5c-affd-25cecc1e5794" />
<img width="1919" height="907" alt="Screenshot 2025-12-20 155057 - Copy" src="https://github.com/user-attachments/assets/4cc9b826-de7a-42af-9f7c-fed3d4282699" />
<img width="1919" height="967" alt="Screenshot 2025-12-29 210448" src="https://github.com/user-attachments/assets/32d133b5-f6b8-43f4-82d7-8fc7c6fc4721" />
<img width="1907" height="804" alt="image" src="https://github.com/user-attachments/assets/51badaa5-796b-49ab-915c-84847b42d6f7" />
<img width="1919" height="908" alt="Screenshot 2026-01-20 021011" src="https://github.com/user-attachments/assets/b7c35c56-f675-4c1e-9c33-30d3572173cb" />

## The Mission: Unity through Diversity
While others build walls, EktaSahyog builds bridges:
*   **The Linguistic Bridge**: Breaking language barriers so a Tamilian and a Punjabi can converse freely.
*   **The Economic Bridge**: Connecting a rural artisan in Kutch directly to a buyer in Kolkata.
*   **The Social Bridge**: Enabling a student in Delhi to volunteer for a cause in Kerala.
*   **The Cultural Bridge**: Helping the youth understand that our diverse traditions are part of one shared identity.

## üí° Innovation: Engineering Unity
We re-engineered standard features into tools for connection:

### 1. Ideological Unity ("The Unity Council")
*   **Concept**: We use AI to reconnect the youth with the shared values of our nation's founders.
*   **How**: By debating with **Sardar Patel** (The Unifier) or **Tagore** (The Cultural Icon), users realize that despite diverse methods, the goal was always one: **A United India**.

### 2. Social Unity ("Digital Seva")
*   **Concept**: Transforming passive empathy into active collaboration.
*   **How**: Our **Unity Projects** dashboard allows cross-regional collaboration. It proves that a problem in one state is a problem for all Indians.

### 3. Cultural Unity ("The Metaverse Bazaar")
*   **Concept**: Replacing "transactions" with "shared experiences".
*   **How**: In our 3D world, users don't just buy objects; they celebrate festivals together. It creates a shared digital space where regional distinctions blur into a collective celebration.

### 4. Economic Unity ("Fair Trade Ecosystem")
*   **Concept**: Unity cannot exist without equity.
*   **How**: By removing middlemen, we ensure that wealth flows fairly from urban centers to rural creators, strengthening the economic fiber that holds the nation together.

---

## üöÄ Comprehensive Feature Suite

### 1. Cultural Marketplace üõçÔ∏è
*   **Economic Unity**: Empowering artisans by giving them a direct national stage.
*   **Fair Trade**: Connects buyers directly with genuine weavers, potters, and craftsmen.
*   **Tech Under the Hood**:
    *   **Search & Discovery**: Regex-based search algorithm with robust categorization and filtering for regional products.
    *   **Payments**: Integrated with **Stripe** (Test Mode) API for secure transaction intents.
    *   **Data Structure**: Relational schema linking distinct Artisan Profiles to their Product Catalog.

### 2. The Metaverse Bazaar (3D Experience) üéÜ
*   **Immersive Walkthrough**: A browser-based **3D Village** where users walk as avatars.
*   **Atmosphere**: Experience a digital festival with **Sky Lanterns** and **Flower Rains**.
*   **Interactive Stalls**: Visit "virtual stalls" to view authentic products in 3D space.
*   **Tech Under the Hood**:
    *   **Engine**: **React Three Fiber (R3F)** & **Three.js**.
    *   **Optimization**: Verified usage of `InstancedMesh` for rendering 150+ particle items (Laterns/Flowers) efficiently.
    *   **Physics**: Raycasting interaction layer combined with `PointerLockControls`.

### 3. Unity Projects & Social Stories ü§ù
*   **Projects (Action)**: Collaborative platform for cross-state initiatives (e.g., "Flood Relief for Assam").
*   **Stories (Voices)**: A "Humans of Bombay" style feed where users share personal experiences of unity and culture.
*   **Tech Under the Hood**:
    *   **Real-Time Updates**: **Stripe Webhooks** (`checkout.session.completed`) trigger atomic updates to project funding stats.
    *   **Crowdfunding Logic**: Secure server-side validation of donation sessions ensures integrity of raised amounts.
    *   **Social Graph**: Stories feature a "Like/Comment" system (`/stories/:id/like`) backed by optimistic UI updates for instant engagement.

### 4. Learn My Culture (Community Repository) üìö
*   **Shared Knowledge**: A user-driven repository of Indian Festivals, Art, and Cuisine.
*   **Interaction**: Community members can share, like, and filter cultural stories by region.
*   **Tech Under the Hood**:
    *   **Engagement Engine**: Custom "Like" and "Share" API endpoints with local state optimism for instant UI feedback.
    *   **Filtering**: Dynamic frontend filtering logic for finding content by specific Category or Region.

### 5. Cultural Arcade (Gamification) üéÆ
*   **Reviving Ancient Games**:
    *   **Moksha Patam** (Snakes & Ladders)
    *   **Ganjifa** (Mughal Cards)

    *   **Pallanguzhi** (Mancala)
*   **Tech Under the Hood**:

    *   **Game Engines**: Custom React State grids for board logic (Snakes & Ladders/Pallanguzhi).
    *   **Animations**: CSS3 Transforms (Rotate/Scale) for card flips and piece movements.

### 6. Universal Chatroom üí¨
*   **Language No Bar**: Real-time **AI Translation** allows a Tamil speaker to chat with a Hindi speaker.
*   **Tech Under the Hood**:
    *   **Auto-Join Logic**: During login, the system extracts `user.location` to automatically plug the socket client into their specific regional channel (e.g., "Delhi" -> `socket.join('delhi')`).
    *   **Real-Time**: **Socket.io** event emitters for bi-directional communication.
    *   **AI Pipeline**: Direct integration with **Groq SDK** (`llama-3.1-8b`) for "Message-in-Translation-out" processing.

### 7. Cultural Hotspots & Interactive Map üó∫Ô∏è
*   **Discovery**: A dynamic, geo-tagged map of India highlighting **Heritage Sites** and **GI Products**.
*   **Visual Storytelling**: Each hotspot features rich media and stories.
*   **Tech Under the Hood**:
    *   **Rendering**: SVG-based map projection handling coordinate mapping for hotspots.
    *   **Interactivity**: Hover-state event listeners triggering dynamic modal content delivery.

### 8. The Unity Council (AI + History) üèõÔ∏è
*   **Living History**: Engage in real-time, voice-enabled debates with **Sardar Vallabhbhai Patel**, **Rabindranath Tagore**, **Dr. B.R. Ambedkar**, and other legends.
*   **Purpose**: To provide ethical and unified guidance to the modern youth using lessons from the past.
*   **Tech Under the Hood**:
    *   **Soul Script**: Custom System Prompts injected into **Llama-3-70b** to enforce historical persona traits.
    *   **Voice Engine**: Native **Web Speech API** (`window.speechSynthesis`) integration with dynamic voice/pitch matching.

### 9. Secure & Role-Based Ecosystem üîê
*   **Bank-Grade Authentication**:
    *   **JWT (JSON Web Tokens)**: Stateless and secure session management.
    *   **Google OAuth 2.0**: One-click secure login.
*   **Role-Based Access Control (RBAC)**:
    *   **Admins**: Full control over Marketplace verification and Project approval.
    *   **Users**: Detailed profile management and gamification history.
*   **Tech Under the Hood**:
    *   **Security**: **Bcrypt** hashing for passwords and HTTPS-only cookie policies.
    *   **Middleware**: Custom `verifyToken` middleware in Express to guard protected API routes.


---

## üõ†Ô∏è Tech Stack

### Frontend
*   **Framework**: React.js (Vite)
*   **Styling**: Tailwind CSS (Glassmorphism & Neomorphism)
*   **Animations**: Framer Motion
*   **Data Visualization**: Recharts
*   **Icons**: Lucide React

### Metaverse (3D Engine)
*   **Core**: React Three Fiber (`@react-three/fiber`)
*   **Helpers**: Zwei (`@react-three/drei`) - for Clouds, Stars, Sparkles, and Text.
*   **Physics/Math**: Three.js (Vector Math for movement)
*   **Effects**: `canvas-confetti` (Particle System)

### Video Calling (Drishti-Milan)
*   **Core Technology**: Pure WebRTC (RTCPeerConnection)
*   **Signaling**: Socket.io (for Offer/Answer/ICE candidate exchange)
*   **Media Capture**: Native Browser APIs (`getUserMedia`)
*   **STUN Servers**: Google Public STUN (NAT traversal)
*   **Architecture**: P2P (Peer-to-Peer) - No external SDKs like Agora/Twilio
*   **UI Framework**: React with `lucide-react` icons

### Backend
*   **Runtime**: Node.js
*   **Framework**: Express.js
*   **Real-time**: Socket.io (for Chat & Notifications)
*   **Authentication**: JWT & Google OAuth 2.0
*   **Email**: Nodemailer

### Database
*   **DB**: MongoDB Atlas
*   **ODM**: Mongoose

### AI & APIs (Groq Cloud)
*   **Inference Engine**: Groq LPU (Language Processing Unit)
*   **Conversational AI**: `llama-3.3-70b-versatile` (Ekta Saathi Chatbot)
*   **Real-time Tasks**: `llama-3.1-8b-instant` (Translation, Sentiment Analysis, Summarization, Toxicity Detection)
*   **Computer Vision (OCR)**: `tesseract.js` (for text scanning)
*   **Payments**: Stripe Integration (Mock/Test Mode)

### 10. Client-Side OCR (Proprietary Implementation) üëÅÔ∏è
*   **Concept**: Instant identity verification without server-side processing overhead.
*   **Tech Stack**:
    *   **Engine**: `Tesseract.js` (WASM-based pure JS OCR engine).
    *   **Camera**: `react-webcam` for live frame capture.
*   **Data Pipeline**:
    *   **Preprocessing**: Custom HTML5 Canvas logic converts images to **Grayscale**, increases **Contrast** by 20%, and applies **Binarization** (Thresholding) to isolate text from background noise.
    *   **Parsing Logic**:
        *   **Name Extraction**: Heuristic regex algorithms scan for "Name:" keywords or capitalize word patterns above "DOB" fields.
        *   **Region Recognition**: Fuzzy matching against a hardcoded array of 28 Indian States.
*   **Privacy**: All processing happens locally in the user's browser (Client-Side), ensuring sensitive ID data never leaves the device during the scan phase.

### 11. Drishti-Milan (Next-Gen Video Calling) üìπ
*   **Concept**: A cultural video calling experience that celebrates identity.
*   **Current Features**:
    *   **Regional Aesthetics**: Video borders automatically change color based on the user's state (e.g., Saffron for Maharashtra, Green for Kerala).
    *   **Identity Badges**: Displays user's location and preferred language on the video feed.
    *   **Swap View**: interactive toggle to switch positions of local and remote video.
    *   **Report Interface**: UI functionality to report users for moderation.
*   **Tech Under the Hood**:
    *   **Pure WebRTC**: Custom implementation using `RTCPeerConnection` and `socket.io` signaling.
    *   **React State UI**: Dynamic rendering of video grid and overlays.

### Game Engine & Algorithms
*   **Collision Detection**: Custom path-checking logic for 3D metaverse movement.
*   **Procedural Generation**: Random tree placement and star fields in the Metaverse.
*   **Card Physics**: CSS 3D Transforms (`rotate-y-180`, `preserve-3d`) for Ganjifa.


---

## üóÇÔ∏è Project Models

The application uses a robust schema architecture:

1.  **User**: Stores profile, role (admin/user), Unity Points, and gamification stats.
2.  **Product**: Marketplace items with "Price in Rupees" and "Price in Points".
3.  **Order**: Tracks purchases, shipping details, and payment status.
4.  **ChatMessage**: Stores chat history with support for translations.
5.  **Project**: Social initiatives with funding goals and volunteer tracking.
6.  **Story**: User-submitted cultural stories and memories.
7.  **Culture**: Informational cards about festivals, food, and traditions.
8.  **GameScore**: Leaderboard tracking for arcade games.
9.  **Resource**: Shared community assets (physical/digital).
10. **Hotspot**: Geo-tagged cultural locations for the map.
11. **Community**: Groups for specific interests or regions.

---

## üìÇ Directory Structure

```graphql
EktaSahyog/
‚îú‚îÄ‚îÄ server/                 # Backend API
‚îÇ   ‚îú‚îÄ‚îÄ config/             # DB & Env Config
‚îÇ   ‚îú‚îÄ‚îÄ controllers/        # Logic for Routes
‚îÇ   ‚îú‚îÄ‚îÄ models/             # Mongoose Schemas (11 Models)
‚îÇ   ‚îú‚îÄ‚îÄ services/           # Groq AI & Email Services
‚îÇ   ‚îú‚îÄ‚îÄ routes/             # API Endpoints
‚îÇ   ‚îî‚îÄ‚îÄ index.js            # Server Entry Point
‚îú‚îÄ‚îÄ src/                    # Frontend Client
‚îÇ   ‚îú‚îÄ‚îÄ Components/         # Reusable UI & Feature Components
‚îÇ   ‚îú‚îÄ‚îÄ pages/              # Main Route Pages (Landing, Dashboard, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ context/            # Global State (Auth, Cart, Theme)
‚îÇ   ‚îî‚îÄ‚îÄ App.jsx             # Main Component & Routing
‚îî‚îÄ‚îÄ public/                 # Static Assets
```

---

## ‚ö° Getting Started

1.  **Clone the Repo**:
    ```bash
    git clone https://github.com/Ankan/EktaSahyog.git
    cd EktaSahyog
    ```

2.  **Install Dependencies**:
    ```bash
    npm install
    cd server && npm install
    ```

3.  **Set Environment Variables**:
    Create `.env` in root and `server/`:
    ```env
    MONGO_URI=your_mongodb_uri
    JWT_SECRET=your_secret
    GROQ_API_KEY=your_groq_api_key
    ```

4.  **Run Development Server**:
    ```bash
    # Root (Frontend)
    npm run dev
    
    # Server (Backend)
    node server/index.js
    ```

---

## üìä Data Flow Diagrams

<img width="777" height="608" alt="image" src="https://github.com/user-attachments/assets/059f2b6c-032f-40d4-8481-5721bada6c78" />
<img width="1271" height="618" alt="image" src="https://github.com/user-attachments/assets/b1366e9c-275a-4269-9453-5c9b10fce840" />

### 1. Authentication Flow (Email + Google OAuth)
```
User Registration
      ‚Üì
Email/Password ‚Üí bcrypt Hash (10 rounds) ‚Üí MongoDB User Collection
      ‚Üì
Email Verification Token Generated (crypto.randomBytes)
      ‚Üì
Nodemailer sends verification email
      ‚Üì
User clicks link ‚Üí isEmailVerified = true
      ‚Üì
Login: JWT Generated (7-day expiry) + localStorage storage
      ‚Üì
Protected Routes: verifyToken middleware validates JWT on every API call
```

**Google OAuth Flow:**
```
User clicks Google Login ‚Üí Redirect to Google Auth API
      ‚Üì
User approves ‚Üí Google sends authorization code
      ‚Üì
Backend exchanges code for user profile (Passport.js GoogleStrategy)
      ‚Üì
Find or Create user in MongoDB
      ‚Üì
Generate JWT ‚Üí Redirect to frontend with token in URL params
      ‚Üì
Frontend extracts token ‚Üí localStorage.setItem('token', jwt)
```

### 2. Marketplace & Payment Flow
```
Browse Products ‚Üí Filter by Region/Category
      ‚Üì
Add to Cart (CartContext - React Context API)
      ‚Üì
Checkout ‚Üí Stripe Payment Intent Created (server/controllers/payment.js)
      ‚Üì
Stripe Hosted Checkout Page (Test Mode - Card Payment)
      ‚Üì
Success ‚Üí Stripe Webhook (checkout.session.completed)
      ‚Üì
Server validates webhook signature ‚Üí Updates Order in MongoDB
      ‚Üì
Redirect user to success page with order confirmation
```

### 3. Real-Time Chat with AI Translation
```
User sends message ‚Üí Socket.io emit('send_message')
      ‚Üì
Server receives ‚Üí Groq AI Toxicity Check (llama-3.1-8b-instant)
      ‚Üì
If SAFE ‚Üí Groq Translation API (sourceLang ‚Üí targetLang)
      ‚Üì
Socket.io broadcast to room (joined by user.location)
      ‚Üì
All users in region receive translated message in their language
      ‚Üì
MongoDB ChatMessage collection stores original + translation
```

### 4. Drishti-Milan WebRTC Signaling
```
Caller: socket.emit('send_video_call_request')
      ‚Üì
Server: Find receiver ‚Üí socket.to(receiverId).emit('incoming_call')
      ‚Üì
Receiver: Sees modal ‚Üí Click Accept ‚Üí emit('accept_video_call')
      ‚Üì
Server: Look up caller's socketId (userIdToSocket Map)
      ‚Üì
Server: emit('call_accepted') to caller with receiver's socket ID
      ‚Üì
Caller: Creates RTCPeerConnection ‚Üí Adds local media tracks
      ‚Üì
Caller: createOffer() ‚Üí socket.emit('webrtc_offer')
      ‚Üì
Receiver: setRemoteDescription(offer) ‚Üí createAnswer()
      ‚Üì
Receiver: socket.emit('webrtc_answer')
      ‚Üì
Both: Exchange ICE candidates ‚Üí P2P connection established
      ‚Üì
Direct video/audio streaming between browsers (no server relay)
```

### 5. Metaverse 3D Rendering Pipeline
```
User enters Metaverse ‚Üí React Three Fiber Canvas mounts
      ‚Üì
PointerLockControls activated on click
      ‚Üì
WASD keys ‚Üí Player component updates camera position (useFrame loop)
      ‚Üì
Products fetched from MongoDB ‚Üí Mapped to 3D Stall positions
      ‚Üì
InstancedMesh renders 250+ particles (Lanterns + Flowers) efficiently
      ‚Üì
Raycasting detects stall click ‚Üí Exit PointerLock ‚Üí Show ProductModal
      ‚Üì
User buys ‚Üí confetti() animation ‚Üí addToCart (Context API)
```

---

## ‚ö†Ô∏è Limitations

### 1. **Stripe Payment (Test Mode Only)**
*   Uses `sk_test_` keys ‚Äî **Not production-ready**
*   Test cards work (e.g., `4242 4242 4242 4242`)
*   Requires migration to live keys + compliance verification for real transactions

### 2. **WebRTC Scalability**
*   **P2P Architecture:** Works for 1-on-1 calls only
*   No SFU/MCU server for group calls
*   NAT traversal may fail without STUN/TURN servers in strict networks
*   Current STUN: Free Google servers (rate-limited in production)

### 3. **AI Translation Latency**
*   Groq API calls add ~500ms-1s delay per message
*   No local caching of translations
*   Fallback: Returns original text if API fails (fail-open strategy)

### 4. **OCR Accuracy**
*   Tesseract.js accuracy depends on image quality (~70-85% for Indian IDs)
*   Requires decent lighting and clear text
*   Fallback: Hardcoded demo data if extraction fails

### 5. **3D Metaverse Browser Compatibility**
*   Requires WebGL 2.0 support
*   Performance issues on low-end devices (mobile)
*   InstancedMesh with 250+ particles may lag on Intel integrated GPUs

### 6. **No Email Rate Limiting**
*   Nodemailer verification emails can be spammed
*   No CAPTCHA or rate limit on registration endpoint

### 7. **MongoDB Atlas Free Tier**
*   512 MB storage limit
*   May hit connection limits with concurrent Socket.io users

### 8. **Frontend Route Protection**
*   No React Router guards ‚Äî Users can manually navigate to `/projects` even if not logged in
*   API calls fail (backend verifyToken catches it), but blank page loads

### 9. **No Image CDN**
*   Product images stored as base64 strings in MongoDB
*   Bloated database size
*   Cloudinary/AWS S3 integration missing

---

## üöÄ Future Scope

### 1. **Advanced Safety Features**
*   **AI Content Moderation:** Integrate Groq/OpenAI vision API to detect inappropriate video content during calls
*   **Screenshot Detection:** WebRTC getDisplayMedia() to detect screen recording attempts
*   **Time Limits:** Restrict new users (<7 days) to 15-minute calls

### 2. **Live Translation for Video Calls**
*   Integrate Web Speech API (`SpeechRecognition`) for speech-to-text
*   Groq translate recognized speech ‚Üí Send as subtitle via Socket.io
*   Display translated subtitles in real-time

### 3. **Group Video Calls**
*   Implement SFU (Selective Forwarding Unit) with mediasoup.js
*   Support 4-8 participants with adaptive bitrate

### 4. **Virtual Backgrounds (AI-Powered)**
*   TensorFlow.js BodyPix for person segmentation
*   Replace background with cultural images (Taj Mahal, Lotus Temple, etc.)

### 5. **Blockchain for Artisan Verification**
*   Polygon/Ethereum smart contracts to verify artisan authenticity
*   NFT certificates for handmade products

### 6. **Mobile App (React Native)**
*   Port core features to iOS/Android
*   Push notifications for chat/calls

### 7. **Advanced AI Chatbot**
*   Groq function calling for booking Projects/Products
*   Multi-turn conversation memory

### 8. **Analytics Dashboard**
*   Track user engagement (time in Metaverse, most-visited hotspots)
*   Heatmaps for 3D movement patterns

### 9. **Gamification Leaderboards**
*   Global/Regional leaderboards for game scores
*   Rewards system (badges, profile frames)

### 10. **PWA (Progressive Web App)**
*   Service workers for offline marketplace browsing
*   Install prompt for desktop/mobile

---

## üìö What I Learned

### 1. **WebRTC is Complex But Powerful**
*   Understanding the signaling dance (Offer/Answer/ICE) was challenging
*   Learned the difference between STUN (NAT traversal) and TURN (relay) servers
*   Pure P2P implementation without SDKs like Agora saved costs but increased complexity
*   **Key Insight:** Always map database IDs to socket IDs serverside to avoid routing errors

### 2. **React State Management for Real-Time Apps**
*   `useState` causes re-renders ‚Äî Bad for video streams
*   `useRef` is essential for WebRTC (peerConnectionRef, localStreamRef)
*   **Lesson:** Never store video elements in state, always use refs

### 3. **Socket.io Event Architecture**
*   Room-based broadcasting (`socket.join(location)`) enables regional chat
*   `socket.to(targetSocketId)` for targeted events (video call signaling)
*   Always clean up listeners with `socket.off()` in useEffect cleanup

### 4. **3D Optimization with React Three Fiber**
*   InstancedMesh is 10x faster than 250 individual `<mesh>` components
*   useFrame loop runs at 60fps ‚Äî Keep logic minimal
*   `useMemo` prevents recreating geometry on every render
*   **Mistake:** Initially rendered each flower as a separate component ‚Üí 15fps
*   **Fix:** InstancedMesh with matrix updates ‚Üí 60fps

### 5. **AI Integration Challenges**
*   Groq API is fast (~500ms) but requires careful prompt engineering
*   JSON mode (`response_format: {type: 'json_object'}`) prevents hallucinated text
*   **Toxicity Detection:** Binary classification (TOXIC/SAFE) more reliable than sentiment scores
*   **Cost:** llama-3.1-8b-instant is free but rate-limited ‚Äî Need fallback logic

### 6. **OCR is Imperfect**
*   Tesseract accuracy varies wildly (70-95%) based on preprocessing
*   Grayscale ‚Üí Contrast ‚Üí Binarization pipeline improved results by 30%
*   Regex parsing for names/regions requires dozens of heuristics
*   **Fallback:** Always provide manual input option

### 7. **Stripe Webhooks are Critical**
*   Never trust client-side payment confirmation (can be spoofed)
*   Webhook signature validation (`stripe.webhooks.constructEvent`) is mandatory
*   Test webhooks locally using Stripe CLI (`stripe listen --forward-to localhost:5001/webhook`)

### 8. **JWT Security Best Practices**
*   Never store sensitive data in JWT payload (it's base64, not encrypted)
*   7-day expiry balances UX and security
*   Always use HTTPS in production (JWT over HTTP is vulnerable to MITM)
*   **Mistake:** Initially stored password hash in JWT ‚Üí Fixed by only storing `userId`

### 9. **Cultural Tech is Underserved**
*   Features like regional borders and language badges resonate with Indian users
*   Unity in Diversity isn't just a slogan ‚Äî It's a product design principle
*   **Realization:** Tech for cultural connection is rare, which makes this project unique

### 10. **Full-Stack is About Trade-offs**
*   Pure WebRTC (cheap, complex) vs Agora SDK (expensive, simple)
*   MongoDB (flexible, no joins) vs PostgreSQL (strict, relational)
*   Client-side OCR (privacy, slow) vs Server-side (fast, privacy concerns)
*   **Lesson:** Every architecture decision is a trade-off, not a right/wrong choice

### 11. **Documentation Matters**
*   Well-commented code saved me 10+ hours during debugging
*   README is the first impression ‚Äî Make it visual and comprehensive
*   **Artifact Approach:** Creating walkthrough.md after features forced me to test thoroughly

---

## üë• Made By

**Team EktaSahyog**  

Team members: Ankan Basu , Sachin Burnwal , Sneha Singh

*Mission*: " To unite India, one pixel at a time." 

---

## üìú License

**MIT License**

Copyright (c) 2025 EktaSahyog

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
